<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html ng-app="cylon">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="A Cylon.JS code example" name="description">
    <meta content="The Hybrid Group" name="author">
    <title>Cylon.JS Example - Conway's Game Of Life - With Spheros</title>
    <link href="/stylesheets/application.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/javascripts/plax.js"></script>
    <script src="/javascripts/parallax_bottom.js"></script>
    <script src="/javascripts/vendor/angular.min.js"></script>
    <script src="/javascripts/app.js"></script>
    <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700%7CMontserrat:700" rel="stylesheet">
    <link href="/favicon.ico" rel="shortcut icon" type="image/gif">
  <script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46433484-2', {"cookieDomain":"cylonjs.com"});
















   ga('send', 'pageview');


</script></head>
  <body>
    
    <div class="app-header section-nav" id="top" role="banner">
      <div class="container">
        <div class="display">
          <div class="app-logo">
            <a href="/">Cylon</a>
          </div>
        </div>
        <nav class="menu">
          <ul class="nav-list">
            <li>
              <a class="active" href="/documentation">Docs</a>
            </li>
            <li>
              <a href="/documentation/platforms" class="item">Platforms</a>
            </li>
            <li>
              <a href="/resources" class="item">Resources</a>
            </li>
            <li>
              <a href="/blog" class="item">Blog</a>
            </li>
            <li>
              <a class="item" target="_blank" href="https://github.com/hybridgroup/cylon/">Github</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <div class="app-content">
      <div class="main-content" role="main">
        <div class="documentation">
          <div class="side-documentation">
            <div class="mobile-menu">
              <h1 class="sidebar-title">Index</h1>
              <a id="docs-menu">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
              </a>
            </div>
            <nav class="docs-sidebar" ng-controller="SidebarCtrl">
              <a href="/documentation/getting-started">Getting Started</a>
              <div class="section" ng-class="{active: active('Guides')}">
                <div class="name" ng-click="show('Guides')">Guides</div>
                <div class="links" ng-show="active('Guides')">
                  <a href="/documentation/guides/what_is_cylon">About Cylon</a>
                  <a href="/documentation/guides/working-with-robots">Working With Robots</a>
                  <a href="/documentation/guides/declarative-vs-fluent">Declarative vs. Fluent</a>
                  <a href="/documentation/guides/cli">CLI</a>
                  <a href="/documentation/guides/test-driven-robotics">Test-Driven Robotics</a>
                  <a href="/documentation/guides/browser-support">Browser Support</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Platforms')}">
                <div class="name" ng-click="show('Platforms')">Platforms</div>
                <div class="links" ng-show="active('Platforms')">
                  <a href="/documentation/platforms/ardrone">Ardrone</a>
                  <a href="/documentation/platforms/arduino">Arduino</a>
                  <a href="/documentation/platforms/yun">Arduino Yun</a>
                  <a href="/documentation/platforms/audio">Audio</a>
                  <a href="/documentation/platforms/beaglebone">Beaglebone</a>
                  <a href="/documentation/platforms/bebop">Bebop</a>
                  <a href="/documentation/platforms/ble">BLE</a>
                  <a href="/documentation/platforms/crazyflie">Crazyflie</a>
                  <a href="/documentation/platforms/digispark">Digispark</a>
                  <a href="/documentation/platforms/imp">Imp</a>
                  <a href="/documentation/platforms/galileo">Intel Galileo</a>
                  <a href="/documentation/platforms/edison">Intel Edison</a>
                  <a href="/documentation/platforms/intel-iot-analytics">Intel IoT Analytics</a>
                  <a href="/documentation/platforms/joystick">Joystick</a>
                  <a href="/documentation/platforms/keyboard">Keyboard</a>
                  <a href="/documentation/platforms/leapmotion">Leap Motion</a>
                  <a href="/documentation/platforms/m2x">M2X</a>
                  <a href="/documentation/platforms/mip">MiP</a>
                  <a href="/documentation/platforms/mqtt">MQTT</a>
                  <a href="/documentation/platforms/nest">Nest</a>
                  <a href="/documentation/platforms/neurosky">Neurosky Mindwave</a>
                  <a href="/documentation/platforms/octoblu">Octoblu</a>
                  <a href="/documentation/platforms/opencv">OpenCV</a>
                  <a href="/documentation/platforms/particle">Particle</a>
                  <a href="/documentation/platforms/pebble">Pebble</a>
                  <a href="/documentation/platforms/hue">Phillips Hue</a>
                  <a href="/documentation/platforms/pinoccio">Pinoccio</a>
                  <a href="/documentation/platforms/powerup">PowerUp</a>
                  <a href="/documentation/platforms/rapiro">Rapiro</a>
                  <a href="/documentation/platforms/raspberry-pi">Raspberry Pi</a>
                  <a href="/documentation/platforms/force">Salesforce</a>
                  <a href="/documentation/platforms/sphero">Sphero</a>
                  <a href="/documentation/platforms/sphero-ble">Sphero BLE</a>
                  <a href="/documentation/platforms/speech">Speech</a>
                  <a href="/documentation/platforms/tessel">Tessel</a>
                  <a href="/documentation/platforms/wiced-sense">Wiced Sense</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Drivers')}">
                <div class="name" ng-click="show('Drivers')">Drivers</div>
                <div class="links" ng-show="active('Drivers')">
                  <div class="sub-section">
                    <div class="name">GPIO</div>
                    <div class="links">
                      <a href="/documentation/drivers/analog-sensor">Analog Sensor</a>
                      <a href="/documentation/drivers/button">Button</a>
                      <a href="/documentation/drivers/continuous-servo">Continuous Servo</a>
                      <a href="/documentation/drivers/direct-pin">Direct Pin</a>
                      <a href="/documentation/drivers/ir-range-finder">Sharp IR Proximity Sensor</a>
                      <a href="/documentation/drivers/led">LED</a>
                      <a href="/documentation/drivers/makey-button">Makey Button</a>
                      <a href="/documentation/drivers/maxbotix">Maxbotix</a>
                      <a href="/documentation/drivers/motor">Motor</a>
                      <a href="/documentation/drivers/relay">Relay</a>
                      <a href="/documentation/drivers/rgb-led">RGB LED</a>
                      <a href="/documentation/drivers/servo">Servo</a>
                    </div>
                  </div>
                  <div class="sub-section">
                    <div class="name">I2C</div>
                    <div class="links">
                      <a href="/documentation/drivers/blinkm">BlinkM</a>
                      <a href="/documentation/drivers/bmp180">BMP180</a>
                      <a href="/documentation/drivers/hmc6352-compass">HMC6352 Compass</a>
                      <a href="/documentation/drivers/lcd">LCD</a>
                      <a href="/documentation/drivers/lidar-lite">LIDAR-Lite</a>
                      <a href="/documentation/drivers/lsm9ds0g">LSM9DS0G</a>
                      <a href="/documentation/drivers/lsm9ds0xm">LSM9DS0XM</a>
                      <a href="/documentation/drivers/mpl115a2">MPL115A2</a>
                      <a href="/documentation/drivers/mpu6050">MPU6050</a>
                      <a href="/documentation/drivers/pca9544a">PCA9544a</a>
                      <a href="/documentation/drivers/pca9685">PCA9685</a>
                    </div>
                  </div>
                  <a href="/documentation/drivers/ardrone-flight">Ardrone - Flight</a>
                  <a href="/documentation/drivers/ardrone-navigation">Ardrone - Navigation</a>
                  <a href="/documentation/drivers/audio">Audio</a>
                  <a href="/documentation/drivers/bb8">BB-8</a>
                  <a href="/documentation/drivers/bebop">Bebop - Flight</a>
                  <a href="/documentation/drivers/crazyflie">Crazyflie</a>
                  <a href="/documentation/drivers/intel-iot-analytics">Intel IoT Analytics</a>
                  <a href="/documentation/drivers/dualshock">Joystick - DualShock 3</a>
                  <a href="/documentation/drivers/xbox360">Joystick - Xbox 360</a>
                  <a href="/documentation/drivers/keyboard">Keyboard</a>
                  <a href="/documentation/drivers/leapmotion">Leap Motion</a>
                  <a href="/documentation/drivers/m2x">M2X</a>
                  <a href="/documentation/drivers/mip">MiP</a>
                  <a href="/documentation/drivers/mqtt">MQTT</a>
                  <a href="/documentation/drivers/nest-home">Nest - Home</a>
                  <a href="/documentation/drivers/nest-protect">Nest - Protect</a>
                  <a href="/documentation/drivers/nest-thermostat">Nest - Thermostat</a>
                  <a href="/documentation/drivers/neurosky">Neurosky Mindwave</a>
                  <a href="/documentation/drivers/ollie">Ollie</a>
                  <a href="/documentation/drivers/pebble">Pebble</a>
                  <a href="/documentation/drivers/hue-bridge">Philips Hue - Bridge</a>
                  <a href="/documentation/drivers/hue-light">Philips Hue - Light</a>
                  <a href="/documentation/drivers/pinoccio-led">Pinoccio - LED</a>
                  <a href="/documentation/drivers/pinoccio-power">Pinoccio - Power</a>
                  <a href="/documentation/drivers/rapiro">Rapiro</a>
                  <a href="/documentation/drivers/force">Salesforce</a>
                  <a href="/documentation/drivers/speech">Speech</a>
                  <a href="/documentation/drivers/sphero">Sphero</a>
                  <a href="/documentation/drivers/wiced-sense">Wiced Sense</a>
                  <div class="sub-section">
                    <div class="name">BLE</div>
                    <div class="links">
                      <a href="/documentation/drivers/ble-battery-service">Battery Service</a>
                      <a href="/documentation/drivers/ble-characteristic">Characteristic</a>
                      <a href="/documentation/drivers/ble-device-information">Device Information</a>
                      <a href="/documentation/drivers/ble-generic-access">Generic Access</a>
                      <a href="/documentation/drivers/powerup">PowerUp</a>
                      <a href="/documentation/drivers/wiced-sense">Wiced Sense</a>
                    </div>
                  </div>
                  <div class="sub-section">
                    <div class="name">Tessel</div>
                    <div class="links">
                      <a href="/documentation/drivers/tessel-accelerometer">Accelerometer</a>
                      <a href="/documentation/drivers/tessel-ambient">Ambient</a>
                      <a href="/documentation/drivers/tessel-audio">Audio</a>
                      <a href="/documentation/drivers/tessel-bluetooth">Bluetooth</a>
                      <a href="/documentation/drivers/tessel-camera">Camera</a>
                      <a href="/documentation/drivers/tessel-gps">GPS</a>
                      <a href="/documentation/drivers/tessel-infrared">Infrared</a>
                      <a href="/documentation/drivers/tessel-relay">Relay</a>
                      <a href="/documentation/drivers/tessel-servo">Servo</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Resources')}">
                <div class="name" ng-click="show('Resources')">Resources</div>
                <div class="links" ng-show="active('Resources')">
                  <a href="/resources">Index</a>
                  <a href="/news">News</a>
                  <a href="/resources/videos">Videos</a>
                  <a href="/resources/links">Links</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Contribute')}">
                <div class="name" ng-click="show('Contribute')">Contribute</div>
                <div class="links" ng-show="active('Contribute')">
                  <a href="/documentation/contribute/guidelines">Guidelines</a>
                  <a href="/documentation/contribute/contact-us">Contact Us</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('API')}">
                <div class="name" ng-click="show('API')">API</div>
                <div class="links" ng-show="active('API')">
                  <a href="/documentation/api/http">HTTP</a>
                  <a href="/documentation/api/mqtt">MQTT</a>
                  <a href="/documentation/api/socket-io">Socket.io</a>
                </div>
              </div>
              <a href="/documentation/examples">Examples</a>
              <div class="section" ng-class="{active: active('Tutorials')}">
                <div class="name" ng-click="show('Tutorials')">Tutorials</div>
                <div class="links" ng-show="active('Tutorials')">
                  <a href="/documentation/tutorials/hackster-hardware-weekend-los-angeles">Hackster Hardware Weekend</a>
                  <a href="/documentation/tutorials/dreamforce-2014">Dreamforce</a>
                  <a href="/documentation/tutorials/thingscon">Thingscon</a>
                </div>
              </div>
              <a href="/documentation/user-contributed-platforms">User Contributed Platforms</a>
              <a href="/documentation/helpers">Helper Methods</a>
              <a href="/documentation/architecture">Architecture</a>
              <a href="/documentation/configuration">Configuration</a>
              <a href="/documentation/adding-new-hardware-support">Adding Hardware Support</a>
              <a href="/documentation/chat">Chat</a>
            </nav>
          </div>
          <div class="container-documentation">
            
            <h1 id="conways-game-of-life---with-spheros">Conway's Game Of Life - With Spheros</h1>
            
            <p>For this Cylon example, we're going to run a version of <a href="https://en.wikipedia.org/wiki/Conway&amp;#x27;s_Game_of_Life">Conway's Game Of
            Life</a>, using Spheros as cells.</p>
            
            <p>To account for the fact that we're now using Spheros to play the game, we need
            to make some changes to the mechanics. Here's how our version of Conway's Game
            will go:</p>
            
            <ul>
              <li>"alive" Spheros glow green, "dead" spheros glow red.</li>
              <li>At the start of the game, all Spheros are "alive".</li>
              <li>On every tick, the "alive" Spheros roll randomly, and count the number of
            collisions they have.</li>
              <li>After the tick, all the Spheros that had between two and six collisions are
            considered "alive", and those with less than two or more than six collisions
            are now "dead"</li>
              <li>If a "dead" Sphero is bumped into by an "alive" one, or has collisions through
            other means, it can become "alive" again.</li>
            </ul>
            
            <p>With those alterations in hand, let's start building it with Cylon! Before you
            start, make sure you have the <code>cylon-sphero</code> module installed.</p>
            
            <p>First off, let's load up Cylon:</p>
            
            <pre class="CodeRay"><span class="keyword">var</span> Cylon = require(<span class="string"><span class="delimiter">'</span><span class="content">cylon</span><span class="delimiter">'</span></span>);
</pre>
            
            <p>For easier use later, let's define the colors we'll be using with the Spheros,
            green for alive and red for dead:</p>
            
            <pre class="CodeRay"><span class="keyword">var</span> Green = <span class="hex">0x0000FF</span>,
    Red = <span class="hex">0xFF0000</span>;
</pre>
            
            <p>We'll be using four robots for this example, but they'll have very similar
            programming so we just need to define what's different between them for now.
            Each of the robots will have a unique name, and will communicate on their own
            port.</p>
            
            <pre class="CodeRay"><span class="keyword">var</span> bots = {
  <span class="key"><span class="delimiter">'</span><span class="content">Thelma</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">/dev/rfcomm0</span><span class="delimiter">'</span></span>,
  <span class="key"><span class="delimiter">'</span><span class="content">Louise</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">/dev/rfcomm1</span><span class="delimiter">'</span></span>,
  <span class="key"><span class="delimiter">'</span><span class="content">Grace</span><span class="delimiter">'</span></span>:  <span class="string"><span class="delimiter">'</span><span class="content">/dev/rfcomm2</span><span class="delimiter">'</span></span>,
  <span class="key"><span class="delimiter">'</span><span class="content">Ada</span><span class="delimiter">'</span></span>:    <span class="string"><span class="delimiter">'</span><span class="content">/dev/rfcomm3</span><span class="delimiter">'</span></span>
};
</pre>
            
            <p>That gets the basics out of the way.</p>
            
            <p>Since, as previously mentioned, our robots all have the same basic
            functionality, we can just loop over the <code>bots</code> object, and create robots as we
            go.</p>
            
            <pre class="CodeRay">Object.keys(bots).forEach(<span class="keyword">function</span>(name) {
  <span class="keyword">var</span> port = bots[name];
</pre>
            
            <p>All of our robots will be connecting to a Sphero, and be operating via a single
            device (you guessed it, a Sphero).</p>
            
            <pre class="CodeRay">  Cylon.robot({
    <span class="key">name</span>: name,

    <span class="key">connections</span>: {
      <span class="key">sphero</span>: { <span class="key">adaptor</span>: <span class="string"><span class="delimiter">'</span><span class="content">sphero</span><span class="delimiter">'</span></span>, <span class="key">port</span>: port }
    },

    <span class="key">devices</span>: {
      <span class="key">sphero</span>: { <span class="key">driver</span>: <span class="string"><span class="delimiter">'</span><span class="content">sphero</span><span class="delimiter">'</span></span> }
    },
</pre>
            
            <p>Now that the pieces are there, we can set up our robot's work. It starts by
            being "born", then moves every three seconds if it's alive, celebrates it's
            birthday every ten seconds, and increments it's contacts every time the Sphero
            detects a collision.</p>
            
            <pre class="CodeRay">    <span class="function">work</span>: <span class="keyword">function</span>(my) {
      my.born();

      my.sphero.on(<span class="string"><span class="delimiter">'</span><span class="content">collision</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
        my.contacts += <span class="integer">1</span>;
      });

      every((<span class="integer">3</span>).seconds(), <span class="keyword">function</span>() {
        <span class="keyword">if</span> (my.alive) {
          my.move();
        }
      });

      every((<span class="integer">10</span>).seconds(), <span class="keyword">function</span>() {
        my.birthday();
      });
    },
</pre>
            
            <p>When a robot is asked to move, it rolls in a random direction at speed 60.</p>
            
            <pre class="CodeRay">    <span class="function">move</span>: <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.sphero.roll(<span class="integer">60</span>, Math.floor(Math.random() * <span class="integer">360</span>));
    },
</pre>
            
            <p>When the robots are first started, they are born. This sets their contacts to
            zero, their age to zero, makes them "alive", and starts them moving for the
            first tick.</p>
            
            <pre class="CodeRay">    <span class="function">born</span>: <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.contacts = <span class="integer">0</span>;
      <span class="local-variable">this</span>.age = <span class="integer">0</span>;
      <span class="local-variable">this</span>.life();
      <span class="local-variable">this</span>.move();
    },
</pre>
            
            <p>In the case of our robots, "life" just means the robot's internal "alive" state
            is set to <code>true</code>, and the Sphero's LED is set to green.</p>
            
            <pre class="CodeRay">    <span class="function">life</span>: <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.alive = <span class="predefined-constant">true</span>;
      <span class="local-variable">this</span>.sphero.setRGB(Green);
    },
</pre>
            
            <p>Similarly, "death" just sets the "alive" state to false, the Sphero's color to
            red, and stops the Sphero from moving.</p>
            
            <pre class="CodeRay">    <span class="function">death</span>: <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.alive = <span class="predefined-constant">false</span>;
      <span class="local-variable">this</span>.sphero.setRGB(Red);
      <span class="local-variable">this</span>.sphero.stop();
    },
</pre>
            
            <p>A robot is decided to have enough contacts if it has between two and six
            contacts.</p>
            
            <pre class="CodeRay">    <span class="function">enoughContacts</span>: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="local-variable">this</span>.contacts &gt;= <span class="integer">2</span> &amp;&amp; <span class="local-variable">this</span>.contacts &lt; <span class="integer">7</span>;
    },
</pre>
            
            <p>On a robot's birthday, it increments it's age, prints it's name, age, and
            contacts to the console, and then determines if it's now alive or dead based on
            the number of contacts it had in the last tick.</p>
            
            <pre class="CodeRay">    <span class="function">birthday</span>: <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.age += <span class="integer">1</span>;

      <span class="keyword">if</span> (<span class="local-variable">this</span>.alive) {
        console.log(<span class="string"><span class="delimiter">"</span><span class="content">Happy birthday, </span><span class="delimiter">"</span></span> + <span class="local-variable">this</span>.name + <span class="string"><span class="delimiter">"</span><span class="content">. You are </span><span class="delimiter">"</span></span> + <span class="local-variable">this</span>.age + <span class="string"><span class="delimiter">"</span><span class="content"> and had </span><span class="delimiter">"</span></span> + <span class="local-variable">this</span>.contacts + <span class="string"><span class="delimiter">"</span><span class="content"> contacts.</span><span class="delimiter">"</span></span>);
      }

      <span class="keyword">if</span> (<span class="local-variable">this</span>.enoughContacts()) {
        <span class="keyword">if</span> (!<span class="local-variable">this</span>.alive) {
          <span class="local-variable">this</span>.born();
        }
      } <span class="keyword">else</span> {
        <span class="local-variable">this</span>.death();
      }

      <span class="local-variable">this</span>.contacts = <span class="integer">0</span>;
    }
  });
});
</pre>
            
            <p>Now that Cylon knows about our robots and what they do, we can get started!</p>
            
            <pre class="CodeRay">Cylon.start();
</pre>
          </div>
        </div>
      </div>
    </div>
    <div class="app-footer">
      <div class="frameworks">
        <div class="parallax-container">
          <div class="background-footer parallax-bottom"></div>
          <div class="container">
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-cylon-2x.png">
              </div>
              <h4>Multiple solutions</h4>
              <p>Cylon.js provides a simple, yet powerful way to create solutions that incorporate multiple, different hardware devices at the same time.</p>
            </div>
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-artoo-2x.png">
              </div>
              <h4>Artoo</h4>
              <p>Want to use Ruby on robots? Check out our sister project Artoo</p>
              <div class="button-footer">
                <a target="blank" href="http://artoo.io">View Project</a>
              </div>
            </div>
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-gobot-2x.png">
              </div>
              <h4>Gobot</h4>
              <p>Want to use the Go programming language to power your robots? Check out our sister project Gobot</p>
              <div class="button-footer">
                <a target="blank" href="http://gobot.io">View Project</a>
              </div>
            </div>
            <div class="clear"></div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <div class="hybrid-group">
            <span>© Copyright 2012-2016</span>
            <a href="http://hybridgroup.com" id="THG-logo" target="_blank">
              <img alt="The Hybrid Group" src="/images/elements/THG_logo.png">
            </a>
          </div>
          <div class="top-link">
            <a href="#top">
              <img alt="Top" src="/images/elements/triangle_up.svg">
              <p>Top</p>
            </a>
          </div>
          <div class="clear"></div>
        </div>
      </div>
    </div>
  </body>
</html>
