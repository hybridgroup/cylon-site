<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html ng-app="cylon">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="description">
    <meta name="author">
    <title>Adding New Hardware Support</title>
    <link href="/stylesheets/application.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/javascripts/plax.js"></script>
    <script src="/javascripts/parallax_bottom.js"></script>
    <script src="/javascripts/vendor/angular.min.js"></script>
    <script src="/javascripts/app.js"></script>
    <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700%7CMontserrat:700" rel="stylesheet">
    <link href="/favicon.ico" rel="shortcut icon" type="image/gif">
  <script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46433484-2', {"cookieDomain":"cylonjs.com"});
















   ga('send', 'pageview');


</script></head>
  <body>
    
    <div class="app-header section-nav" id="top" role="banner">
      <div class="container">
        <div class="display">
          <div class="app-logo">
            <a href="/">Cylon</a>
          </div>
        </div>
        <nav class="menu">
          <ul class="nav-list">
            <li>
              <a class="active" href="/documentation">Docs</a>
            </li>
            <li>
              <a href="/documentation/platforms" class="item">Platforms</a>
            </li>
            <li>
              <a href="/resources" class="item">Resources</a>
            </li>
            <li>
              <a href="/blog" class="item">Blog</a>
            </li>
            <li>
              <a class="item" target="_blank" href="https://github.com/hybridgroup/cylon/">Github</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <div class="app-content">
      <div class="page-title">
        <div class="container">
          <h1 class="title">Cylon.JS - Adding New Hardware Support</h1>
          <h2 class="subtitle">Made by Humans, for Humans.</h2>
        </div>
      </div>
      <div class="main-content" role="main">
        <div class="documentation">
          <div class="side-documentation">
            <div class="mobile-menu">
              <h1 class="sidebar-title">Index</h1>
              <a id="docs-menu">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
              </a>
            </div>
            <nav class="docs-sidebar" ng-controller="SidebarCtrl">
              <a href="/documentation/getting-started">Getting Started</a>
              <div class="section" ng-class="{active: active('Guides')}">
                <div class="name" ng-click="show('Guides')">Guides</div>
                <div class="links" ng-show="active('Guides')">
                  <a href="/documentation/guides/what_is_cylon">About Cylon</a>
                  <a href="/documentation/guides/working-with-robots">Working With Robots</a>
                  <a href="/documentation/guides/declarative-vs-fluent">Declarative vs. Fluent</a>
                  <a href="/documentation/guides/cli">CLI</a>
                  <a href="/documentation/guides/test-driven-robotics">Test-Driven Robotics</a>
                  <a href="/documentation/guides/browser-support">Browser Support</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Platforms')}">
                <div class="name" ng-click="show('Platforms')">Platforms</div>
                <div class="links" ng-show="active('Platforms')">
                  <a href="/documentation/platforms/ardrone">Ardrone</a>
                  <a href="/documentation/platforms/arduino">Arduino</a>
                  <a href="/documentation/platforms/yun">Arduino Yun</a>
                  <a href="/documentation/platforms/audio">Audio</a>
                  <a href="/documentation/platforms/beaglebone">Beaglebone</a>
                  <a href="/documentation/platforms/ble">BLE</a>
                  <a href="/documentation/platforms/crazyflie">Crazyflie</a>
                  <a href="/documentation/platforms/digispark">Digispark</a>
                  <a href="/documentation/platforms/imp">Imp</a>
                  <a href="/documentation/platforms/galileo">Intel Galileo</a>
                  <a href="/documentation/platforms/edison">Intel Edison</a>
                  <a href="/documentation/platforms/intel-iot-analytics">Intel IoT Analytics</a>
                  <a href="/documentation/platforms/joystick">Joystick</a>
                  <a href="/documentation/platforms/keyboard">Keyboard</a>
                  <a href="/documentation/platforms/leapmotion">Leap Motion</a>
                  <a href="/documentation/platforms/m2x">M2X</a>
                  <a href="/documentation/platforms/mip">MiP</a>
                  <a href="/documentation/platforms/mqtt">MQTT</a>
                  <a href="/documentation/platforms/nest">Nest</a>
                  <a href="/documentation/platforms/neurosky">Neurosky Mindwave</a>
                  <a href="/documentation/platforms/ollie">Ollie</a>
                  <a href="/documentation/platforms/opencv">OpenCV</a>
                  <a href="/documentation/platforms/pebble">Pebble</a>
                  <a href="/documentation/platforms/hue">Phillips Hue</a>
                  <a href="/documentation/platforms/pinoccio">Pinoccio</a>
                  <a href="/documentation/platforms/powerup">PowerUp</a>
                  <a href="/documentation/platforms/rapiro">Rapiro</a>
                  <a href="/documentation/platforms/raspberry-pi">Raspberry Pi</a>
                  <a href="/documentation/platforms/force">Salesforce</a>
                  <a href="/documentation/platforms/skynet">Skynet</a>
                  <a href="/documentation/platforms/spark">Spark</a>
                  <a href="/documentation/platforms/sphero">Sphero</a>
                  <a href="/documentation/platforms/speech">Speech</a>
                  <a href="/documentation/platforms/tessel">Tessel</a>
                  <a href="/documentation/platforms/wiced-sense">Wiced Sense</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Drivers')}">
                <div class="name" ng-click="show('Drivers')">Drivers</div>
                <div class="links" ng-show="active('Drivers')">
                  <div class="sub-section">
                    <div class="name">GPIO</div>
                    <div class="links">
                      <a href="/documentation/drivers/analog-sensor">Analog Sensor</a>
                      <a href="/documentation/drivers/button">Button</a>
                      <a href="/documentation/drivers/continuous-servo">Continuous Servo</a>
                      <a href="/documentation/drivers/direct-pin">Direct Pin</a>
                      <a href="/documentation/drivers/ir-range-finder">Sharp IR Proximity Sensor</a>
                      <a href="/documentation/drivers/led">LED</a>
                      <a href="/documentation/drivers/makey-button">Makey Button</a>
                      <a href="/documentation/drivers/maxbotix">Maxbotix</a>
                      <a href="/documentation/drivers/motor">Motor</a>
                      <a href="/documentation/drivers/rgb-led">RGB LED</a>
                      <a href="/documentation/drivers/servo">Servo</a>
                    </div>
                  </div>
                  <div class="sub-section">
                    <div class="name">I2C</div>
                    <div class="links">
                      <a href="/documentation/drivers/blinkm">BlinkM</a>
                      <a href="/documentation/drivers/bmp180">BMP180</a>
                      <a href="/documentation/drivers/hmc6352-compass">HMC6352 Compass</a>
                      <a href="/documentation/drivers/lcd">LCD</a>
                      <a href="/documentation/drivers/lidar-lite">LIDAR-Lite</a>
                      <a href="/documentation/drivers/lsm9ds0g">LSM9DS0G</a>
                      <a href="/documentation/drivers/lsm9ds0xm">LSM9DS0XM</a>
                      <a href="/documentation/drivers/mpl115a2">MPL115A2</a>
                      <a href="/documentation/drivers/mpu6050">MPU6050</a>
                      <a href="/documentation/drivers/pca9685">PCA9685</a>
                    </div>
                  </div>
                  <a href="/documentation/drivers/ardrone-flight">Ardrone - Flight</a>
                  <a href="/documentation/drivers/ardrone-navigation">Ardrone - Navigation</a>
                  <a href="/documentation/drivers/audio">Audio</a>
                  <a href="/documentation/drivers/crazyflie">Crazyflie</a>
                  <a href="/documentation/drivers/intel-iot-analytics">Intel IoT Analytics</a>
                  <a href="/documentation/drivers/dualshock">Joystick - DualShock 3</a>
                  <a href="/documentation/drivers/xbox360">Joystick - Xbox 360</a>
                  <a href="/documentation/drivers/keyboard">Keyboard</a>
                  <a href="/documentation/drivers/leapmotion">Leap Motion</a>
                  <a href="/documentation/drivers/m2x">M2X</a>
                  <a href="/documentation/drivers/mip">MiP</a>
                  <a href="/documentation/drivers/mqtt">MQTT</a>
                  <a href="/documentation/drivers/nest-home">Nest - Home</a>
                  <a href="/documentation/drivers/nest-thermostat">Nest - Thermostat</a>
                  <a href="/documentation/drivers/neurosky">Neurosky Mindwave</a>
                  <a href="/documentation/drivers/ollie">Ollie</a>
                  <a href="/documentation/drivers/pebble">Pebble</a>
                  <a href="/documentation/drivers/hue-bridge">Philips Hue - Bridge</a>
                  <a href="/documentation/drivers/hue-light">Philips Hue - Light</a>
                  <a href="/documentation/drivers/pinoccio-led">Pinoccio - LED</a>
                  <a href="/documentation/drivers/pinoccio-power">Pinoccio - Power</a>
                  <a href="/documentation/drivers/rapiro">Rapiro</a>
                  <a href="/documentation/drivers/force">Salesforce</a>
                  <a href="/documentation/drivers/skynet">Skynet</a>
                  <a href="/documentation/drivers/speech">Speech</a>
                  <a href="/documentation/drivers/sphero">Sphero</a>
                  <a href="/documentation/drivers/wiced-sense">Wiced Sense</a>
                  <div class="sub-section">
                    <div class="name">BLE</div>
                    <div class="links">
                      <a href="/documentation/drivers/ble-battery-service">Battery Service</a>
                      <a href="/documentation/drivers/ble-device-information">Device Information</a>
                      <a href="/documentation/drivers/ble-generic-access">Generic Access</a>
                      <a href="/documentation/drivers/powerup">PowerUp</a>
                      <a href="/documentation/drivers/wiced-sense">Wiced Sense</a>
                    </div>
                  </div>
                  <div class="sub-section">
                    <div class="name">Tessel</div>
                    <div class="links">
                      <a href="/documentation/drivers/tessel-accelerometer">Accelerometer</a>
                      <a href="/documentation/drivers/tessel-ambient">Ambient</a>
                      <a href="/documentation/drivers/tessel-audio">Audio</a>
                      <a href="/documentation/drivers/tessel-bluetooth">Bluetooth</a>
                      <a href="/documentation/drivers/tessel-camera">Camera</a>
                      <a href="/documentation/drivers/tessel-gps">GPS</a>
                      <a href="/documentation/drivers/tessel-infrared">Infrared</a>
                      <a href="/documentation/drivers/tessel-relay">Relay</a>
                      <a href="/documentation/drivers/tessel-servo">Servo</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section" ng-class="{active: active('Contribute')}">
                <div class="name" ng-click="show('Contribute')">Contribute</div>
                <div class="links" ng-show="active('Contribute')">
                  <a href="/documentation/contribute/guidelines">Guidelines</a>
                  <a href="/documentation/contribute/contact-us">Contact Us</a>
                </div>
              </div>
              <div class="section" ng-class="{active: active('API')}">
                <div class="name" ng-click="show('API')">API</div>
                <div class="links" ng-show="active('API')">
                  <a href="/documentation/api/http">HTTP</a>
                  <a href="/documentation/api/mqtt">MQTT</a>
                  <a href="/documentation/api/socket-io">Socket.io</a>
                </div>
              </div>
              <a href="/documentation/examples">Examples</a>
              <div class="section" ng-class="{active: active('Tutorials')}">
                <div class="name" ng-click="show('Tutorials')">Tutorials</div>
                <div class="links" ng-show="active('Tutorials')">
                  <a href="/documentation/tutorials/hackster-hardware-weekend-los-angeles">Hackster Hardware Weekend</a>
                  <a href="/documentation/tutorials/dreamforce-2014">Dreamforce</a>
                  <a href="/documentation/tutorials/thingscon">Thingscon</a>
                </div>
              </div>
              <a href="/documentation/user-contributed-platforms">User Contributed Platforms</a>
              <a href="/documentation/helpers">Helper Methods</a>
              <a href="/documentation/architecture">Architecture</a>
              <a href="/documentation/configuration">Configuration</a>
              <a href="/documentation/adding-new-hardware-support">Adding Hardware Support</a>
              <a href="/documentation/chat">Chat</a>
            </nav>
          </div>
          <div class="container-documentation">
            
            <p>Adding Cylon.JS support for new hardware is straightforward, thanks to the simple patterns and tools included with Cylon itself.</p>
            
            <h2 id="generating">Generating</h2>
            
            <p>The easiest way to get started is with the <code>cylon-cli</code> toolkit.
            Install it with NPM:</p>
            
            <pre class="CodeRay">$ npm install cylon-cli
</pre>
            
            <p>With that done, you can use it to generate a new template Cylon module, by calling <code>cylon generate module</code> with the name of the platform you're adding support for.
            For example, to generate a module for the Leap Motion:</p>
            
            <pre class="CodeRay">$ cylon generate module leapmotion
Creating new module 'cylon-leapmotion'
Compiling templates for 'cylon-leapmotion'
</pre>
            
            <p>After running this, <code>cd</code> into the folder and look around:</p>
            
            <pre class="CodeRay">$ cd cylon-leapmotion
$ ls
LICENSE Makefile README.markdown lib/ package.json spec/
</pre>
            
            <p>The generater makes a basic module, with Cylon as a dependency and a starting point for writing your own tests.</p>
            
            <h2 id="writing-adaptors">Writing Adaptors</h2>
            
            <p>Your module's Adaptor classes should subclass the <code>Cylon.Adaptor</code> core class, and are responsible for connecting to the platform you're integrating with.
            They should also handle any necessary device set-up, and proxy events the user should know about.</p>
            
            <p>Some things to note about Adaptor subclasses:</p>
            
            <p>They <strong>must</strong> implement <code>#start</code> - the 'start' method dictates what setup a Driver needs to do on startup.
            This might involve connecting to the device, or listening for events.
            This method must be implemented, and trigger the provided callback, or Cylon cannot start properly.</p>
            
            <p>They <strong>must</strong> implement <code>#disconnect</code> - the 'disconnect' method dictates what teardown a Driver needs to do on shutdown.
            This can involve safely disconnecting from hardware, restoring device state, etc.
            This method must be implemented, and trigger the provided callback, or Cylon cannot shut down properly.</p>
            
            <p>For an example, here's the Adaptor from the <code>cylon-ardrone</code> module, with some explanatory comments added below:</p>
            
            <pre class="CodeRay"><span class="string"><span class="delimiter">"</span><span class="content">use strict</span><span class="delimiter">"</span></span>;

<span class="keyword">var</span> LibARDrone = require(<span class="string"><span class="delimiter">'</span><span class="content">ar-drone</span><span class="delimiter">'</span></span>),
    Cylon = require(<span class="string"><span class="delimiter">'</span><span class="content">cylon</span><span class="delimiter">'</span></span>);

<span class="comment">// an Array of commands the ARDrone library responds to</span>
<span class="comment">// e.g. "takeoff", "hover", "land"</span>
<span class="keyword">var</span> Commands = require(<span class="string"><span class="delimiter">'</span><span class="content">./commands</span><span class="delimiter">'</span></span>);

<span class="keyword">var</span> ARDrone = module.<span class="function">exports</span> = <span class="keyword">function</span> <span class="function">ARDrone</span>(opts) {
  ARDrone.__super__.constructor.apply(<span class="local-variable">this</span>, <span class="local-variable">arguments</span>);
  opts = opts || {};

  <span class="local-variable">this</span>.ip = opts.host || opts.port || <span class="string"><span class="delimiter">"</span><span class="content">192.168.1.1</span><span class="delimiter">"</span></span>

  <span class="local-variable">this</span>.connector = <span class="local-variable">this</span>.ardrone = <span class="predefined-constant">null</span>;
};

Cylon.Utils.subclass(ARDrone, Cylon.Adaptor);

ARDrone.prototype.<span class="function">connect</span> = <span class="keyword">function</span>(callback) {
  <span class="local-variable">this</span>.connector = <span class="local-variable">this</span>.ardrone = <span class="keyword">new</span> LibARDrone.createClient({
    <span class="key">ip</span>: <span class="local-variable">this</span>.ip
  });

  <span class="local-variable">this</span>.proxyMethods(Commands, <span class="local-variable">this</span>.ardrone, <span class="local-variable">this</span>);

  <span class="keyword">var</span> events = [
    <span class="string"><span class="delimiter">'</span><span class="content">navdata</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">landing</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">landed</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">takeoff</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">hovering</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">flying</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">lowBattery</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">batteryChange</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">altitudeChange</span><span class="delimiter">'</span></span>
  ];

  events.forEach(<span class="keyword">function</span>(name) {
    <span class="local-variable">this</span>.defineAdaptorEvent(name);
  }.bind(<span class="local-variable">this</span>));

  callback();
};

ARDrone.prototype.<span class="function">disconnect</span> = <span class="keyword">function</span>(callback) {
  callback();
}
</pre>
            
            <h2 id="writing-drivers">Writing Drivers</h2>
            
            <p>Drivers subclass Cylon.Driver, and are the parts of your system that provide a higher-level abstraction over the Adaptor.
            They should provide wrapping of commands where helpful, and process data from events if needed.</p>
            
            <p>A few things to note about Driver subclasses:</p>
            
            <p>They <strong>must</strong> implement <code>#start</code> - the 'start' method dictates what setup a Driver needs to do on startup.
            This might involve setting initial state, or listening for events.
            This method must be implemented, and trigger the provided callback, or Cylon cannot start properly.</p>
            
            <p>They <strong>must</strong> implement <code>#halt</code> - the 'halt' method dictates what teardown a Driver needs to do on shutdown.
            This can involve restoring state, clearing up references, etc.
            This method must be implemented, and trigger the provided callback, or Cylon cannot shut down properly.</p>
            
            <p>The Adaptor instance associated with your Device instance is accessible as <code>this.connection</code>.</p>
            
            <p>The <code>#setupCommands</code> method is your friend - pass it an array of methods, and it'll automatically proxy them to the connection with no user intervention.
            They will also be snake_cased and added as API commands.</p>
            
            <p>Here's the example driver from the <code>cylon-sphero</code> module.</p>
            
            <pre class="CodeRay"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

<span class="keyword">var</span> Cylon = require(<span class="string"><span class="delimiter">'</span><span class="content">cylon</span><span class="delimiter">'</span></span>);

<span class="comment">// an Array of commands the Sphero library/Adaptor responds to</span>
<span class="comment">// e.g. "roll", "setRGB", "stop"</span>
<span class="keyword">var</span> Commands = require(<span class="string"><span class="delimiter">'</span><span class="content">./commands</span><span class="delimiter">'</span></span>);

<span class="keyword">var</span> Driver = module.<span class="function">exports</span> = <span class="keyword">function</span> <span class="function">Driver</span>() {
  Driver.__super__.constructor.apply(<span class="local-variable">this</span>, <span class="local-variable">arguments</span>);
  <span class="local-variable">this</span>.setupCommands(Commands);
};

Cylon.Utils.subclass(Driver, Cylon.Driver);

<span class="comment">// Public: Starts the driver.</span>
<span class="comment">//</span>
<span class="comment">// callback - params</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">start</span> = <span class="keyword">function</span>(callback) {
  <span class="keyword">var</span> events = [<span class="string"><span class="delimiter">'</span><span class="content">message</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">update</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">notification</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">collision</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">data</span><span class="delimiter">'</span></span>];

  events.forEach(<span class="keyword">function</span>(e) {
    <span class="local-variable">this</span>.defineDriverEvent(e);
  }.bind(<span class="local-variable">this</span>));

  <span class="local-variable">this</span>.connection.setTemporaryOptionFlags(<span class="hex">0x01</span>);

  callback();
};

Driver.prototype.<span class="function">halt</span> = <span class="keyword">function</span>(callback) {
  callback();
};

<span class="comment">// Public: This commands Sphero to roll along the provided vector. Both a speed and a</span>
<span class="comment">// heading are required; the latter is considered relative to the last calibrated direction.</span>
<span class="comment">//</span>
<span class="comment">// speed - params</span>
<span class="comment">// heading - params</span>
<span class="comment">// state - params</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">roll</span> = <span class="keyword">function</span>(speed, heading, state) {
  <span class="keyword">if</span> (state == <span class="predefined-constant">null</span>) {
    state = <span class="integer">1</span>;
  }

  <span class="local-variable">this</span>.connection.roll(speed, heading, state);
};

<span class="comment">// Public: Sets the sphero to detect collisions and report them.</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">detectCollisions</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.connection.detectCollisions();
};

<span class="comment">// Public: Sets the sphero to detect collisions and report them.</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">detectLocator</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.connection.detectLocator();
};

<span class="comment">// Public: Stop the driver.</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">stop</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.connection.stop();
};

<span class="comment">// Public: This allows you to set the RGB LED color, just pass an array containing</span>
<span class="comment">// RGB hex or a string with one of the color names of the list.</span>
<span class="comment">//</span>
<span class="comment">// color - params</span>
<span class="comment">// persist - params</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">setRGB</span> = <span class="keyword">function</span>(color, persist) {
  <span class="keyword">if</span> (persist == <span class="predefined-constant">null</span>) {
    persist = <span class="predefined-constant">true</span>;
  }

  <span class="local-variable">this</span>.connection.setRGB(color, persist);
};

<span class="comment">// Public: Starts the calibration of the driver.</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">startCalibration</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.connection.setBackLED(<span class="integer">127</span>);
  <span class="local-variable">this</span>.connection.setStabilization(<span class="integer">0</span>);
};

<span class="comment">// Public: Finish the calibration of the driver.</span>
<span class="comment">//</span>
<span class="comment">// Returns null.</span>
Driver.prototype.<span class="function">finishCalibration</span> = <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.connection.setHeading(<span class="integer">0</span>);
  <span class="local-variable">this</span>.connection.setBackLED(<span class="integer">0</span>);
  <span class="local-variable">this</span>.connection.setStabilization(<span class="integer">1</span>);
};
</pre>
            
            <h2 id="event-propagation">Event Propagation</h2>
            
            <p>Inside of Drivers and Adaptors, you can manually emit events (<code>this.emit</code>).
            This will work for most drivers, and lets you tweak data from events you're listening to to make it more user-friendly.</p>
            
            <p>However, if you just want to pipe events through from your source (<code>this.connector</code> in Adaptor, <code>this.connection</code> in Driver), Cylon provides a shortcut for you, in the form of the <code>Adaptor#defineAdaptorEvent</code> and <code>Driver#defineDriverEvent</code> functions.</p>
            
            <p>The functions can be used in a number of ways, which we'll go through now.
            For purposes of simplification, we'll be talking about <code>Adaptor#defineAdaptorEvent</code>.
            But for Drivers, you simply change the method name to <code>#defineDriverEvent</code>, the arguments follow the same pattern.</p>
            
            <p><code>#defineDriverEvent</code> also proxies from <code>this.connection</code>, instead of <code>this.connector</code> as in <code>#defineAdaptorEvent</code>.</p>
            
            <p><strong>With a source and target event name</strong>.
            This is the most flexible approach, and lets you rename events that will actually be received by the robot.
            Additionally, if you pass the 'update' param, an <code>update</code> event will also be emitted:</p>
            
            <pre class="CodeRay"><span class="local-variable">this</span>.defineAdaptorEvent({
  <span class="key">eventName</span>: <span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>,
  <span class="key">targetEventName</span>: <span class="string"><span class="delimiter">'</span><span class="content">hello</span><span class="delimiter">'</span></span>,
  <span class="key">update</span>: <span class="predefined-constant">true</span>
});
</pre>
            
            <p>With this code, whenever the Adaptor's <code>connector</code> receives the 'greeting' event, it will emit the 'hello' and 'update' events, with the data that the 'greeting' event received.</p>
            
            <p><strong>With just an eventName</strong>.
            This invocation assumes you want the event to be proxied 1-to-1.</p>
            
            <pre class="CodeRay"><span class="local-variable">this</span>.defineAdaptorEvent({ <span class="key">eventName</span>: <span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span> });
</pre>
            
            <p>This invocation means that when the <code>connector</code> receives the 'greeting' event, an identical event will be emitted from the Adaptor.</p>
            
            <p><strong>With just an eventName (string version)</strong>.
            Similar to the above example, but a bit shorter.</p>
            
            <pre class="CodeRay"><span class="local-variable">this</span>.defineAdaptorEvent(<span class="string"><span class="delimiter">'</span><span class="content">greeting</span><span class="delimiter">'</span></span>);
</pre>
          </div>
        </div>
      </div>
    </div>
    <div class="app-footer">
      <div class="frameworks">
        <div class="parallax-container">
          <div class="background-footer parallax-bottom"></div>
          <div class="container">
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-cylon-2x.png">
              </div>
              <h4>Multiple solutions</h4>
              <p>Cylon.js provides a simple, yet powerful way to create solutions that incorporate multiple, different hardware devices at the same time.</p>
            </div>
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-artoo-2x.png">
              </div>
              <h4>Artoo</h4>
              <p>Want to use Ruby on robots? Check out our sister project Artoo</p>
              <div class="button-footer">
                <a target="blank" href="http://artoo.io">View Project</a>
              </div>
            </div>
            <div class="column-footer">
              <div class="img">
                <img class="display" src="/images/elements/logo-gobot-2x.png">
              </div>
              <h4>Gobot</h4>
              <p>Want to use the Go programming language to power your robots? Check out our sister project Gobot</p>
              <div class="button-footer">
                <a target="blank" href="http://gobot.io">View Project</a>
              </div>
            </div>
            <div class="clear"></div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <div class="hybrid-group">
            <span>Â© Copyright 2012-2015</span>
            <a href="http://hybridgroup.com" id="THG-logo" target="_blank">
              <img alt="The Hybrid Group" src="/images/elements/THG_logo.png">
            </a>
          </div>
          <div class="top-link">
            <a href="#top">
              <img alt="Top" src="/images/elements/triangle_up.svg">
              <p>Top</p>
            </a>
          </div>
          <div class="clear"></div>
        </div>
      </div>
    </div>
  </body>
</html>
